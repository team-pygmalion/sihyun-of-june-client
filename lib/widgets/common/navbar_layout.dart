import 'package:cached_query_flutter/cached_query_flutter.dart';
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:flutter_svg/flutter_svg.dart';
import 'package:go_router/go_router.dart';
import 'package:project_june_client/actions/notification/queries.dart';
import 'package:project_june_client/constants.dart';
import 'package:project_june_client/main.dart';

import 'navbar/navbar_icon.dart';
import 'navbar/notification_icon.dart';

final tabList = [
  TabRoutePaths.mailList,
  TabRoutePaths.notificationList,
  TabRoutePaths.all,
];

class NavbarLayout extends ConsumerWidget {
  final Widget child;
  final String? routePath;

  const NavbarLayout({Key? key, required this.child, required this.routePath})
      : super(key: key);

  Widget mailIcon(bool isActive, String primaryColor, String secondaryColor) {
    final svgString = '''
<svg width="34" height="36" viewBox="0 0 34 36" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="1.125" y="7" width="32" height="22" rx="2" fill="#ECEBEB"/>
  <path d="M14.3603 19.918L3.29717 11.1839C2.02327 10.1782 1.38631 9.67536 1.22243 9.26874C0.914174 8.50388 1.21794 7.62887 1.93383 7.21955C2.31442 7.00195 3.12595 7.00195 4.749 7.00195H29.251C30.8741 7.00195 31.6856 7.00195 32.0662 7.21955C32.7821 7.62887 33.0858 8.50388 32.7776 9.26874C32.6137 9.67536 31.9767 10.1782 30.7028 11.1839L19.6397 19.918C18.8974 20.504 18.5263 20.797 18.1339 20.9572C17.4071 21.2539 16.5929 21.2539 15.8661 20.9572C15.4737 20.797 15.1026 20.504 14.3603 19.918Z" fill="${isActive ? primaryColor : "#D7D7D7"}"/>
  <mask id="mask0_692_3270" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="1" y="7" width="33" height="22">
    <rect x="1.125" y="7" width="32" height="22" rx="2" fill="#ECEBEB"/>
  </mask>
  <g mask="url(#mask0_692_3270)">
    <path d="M1.125 29L13.125 19" stroke="${isActive ? secondaryColor : "#DDDDDD"}" stroke-width="1.5"/>
    <path d="M33.125 29L21.125 19" stroke="${isActive ? secondaryColor : "#DDDDDD"}" stroke-width="1.5"/>
    <path d="M3.11235 11.5744L14.1755 20.3085C14.1984 20.3266 14.2211 20.3445 14.2435 20.3622C14.9204 20.8968 15.3435 21.2309 15.8021 21.4181C16.6501 21.7643 17.5999 21.7643 18.4479 21.4181C18.9065 21.2309 19.3296 20.8968 20.0065 20.3622C20.0289 20.3445 20.0515 20.3266 20.0745 20.3085L31.1376 11.5744L31.152 11.5631C31.7768 11.0698 32.264 10.6852 32.6142 10.3729C32.9525 10.0713 33.2363 9.77622 33.3663 9.45369C33.768 8.45705 33.3722 7.31689 32.4393 6.78354C32.1375 6.61094 31.7319 6.55524 31.2795 6.5281C30.8111 6.5 30.1904 6.5 29.3944 6.5H29.376H4.874H4.8556C4.05962 6.5 3.43889 6.5 2.97054 6.5281C2.51815 6.55524 2.11254 6.61094 1.81066 6.78354C0.87783 7.31689 0.482009 8.45705 0.883681 9.45369C1.01367 9.77622 1.29751 10.0713 1.63577 10.3729C1.98596 10.6852 2.47316 11.0698 3.09791 11.563L3.11235 11.5744Z" stroke="#ECEBEB"/>
  </g>
</svg>
''';
    return SvgPicture.string(svgString, height: 32);
  }

  Widget bellIcon(bool isActive, String primaryColor, String secondaryColor) {
    final svgString = '''
<svg width="24" height="31" viewBox="0 0 24 31" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M12.2833 30.0169C14.8607 30.0169 16.95 27.9276 16.95 25.3503C16.95 22.7729 14.8607 20.6836 12.2833 20.6836C9.70599 20.6836 7.61666 22.7729 7.61666 25.3503C7.61666 27.9276 9.70599 30.0169 12.2833 30.0169Z" fill="${isActive ? secondaryColor : "#E9E9E9"}"/>
  <path d="M12.2833 4.68359C13.3879 4.68359 14.2833 3.78816 14.2833 2.68359C14.2833 1.57902 13.3879 0.683594 12.2833 0.683594C11.1788 0.683594 10.2833 1.57902 10.2833 2.68359C10.2833 3.78816 11.1788 4.68359 12.2833 4.68359Z" fill="${isActive ? secondaryColor : "#E9E9E9"}"/>
  <path d="M21.6167 18.8035V12.9768C21.6167 7.93681 17.7433 3.58347 12.7033 3.35681C7.35667 3.12347 2.95 7.38347 2.95 12.6835V18.8035C2.95 19.5901 2.71667 20.3635 2.27667 21.0235L1.02333 22.9035C0.136667 24.2301 1.09 26.0101 2.69 26.0101H21.8833C23.4833 26.0101 24.4367 24.2301 23.55 22.9035L22.2967 21.0235C21.8567 20.3635 21.6233 19.5968 21.6233 18.8035H21.6167Z" fill="${isActive ? primaryColor : "#E9E9E9"}"/>
</svg>
''';
    return SvgPicture.string(svgString, height: 32);
  }

  Widget menuIcon(bool isActive, String primaryColor) {
    final svgString = '''
<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M28 4.6733C27.76 4.6733 27.76 4.63997 27.5267 4.63997C27.2933 4.63997 27.2867 4.63997 27.0533 4.63997C26.82 4.63997 26.8133 4.63997 26.58 4.63997C26.3467 4.63997 26.34 4.6533 26.1 4.6533C25.86 4.6533 25.86 4.68663 25.62 4.68663C25.38 4.68663 25.38 4.66663 25.14 4.66663C24.9 4.66663 24.9 4.64663 24.66 4.64663C24.42 4.64663 24.42 4.6333 24.18 4.6333C23.94 4.6333 23.94 4.65997 23.7 4.65997C23.46 4.65997 23.46 4.6733 23.22 4.6733C22.98 4.6733 22.98 4.68663 22.74 4.68663C22.5 4.68663 22.5 4.69997 22.26 4.69997C22.02 4.69997 22.02 4.69997 21.78 4.69997C21.54 4.69997 21.54 4.66663 21.3 4.66663C21.06 4.66663 21.06 4.64663 20.82 4.64663C20.58 4.64663 20.58 4.6933 20.34 4.6933C20.1 4.6933 20.1 4.66663 19.86 4.66663C19.62 4.66663 19.62 4.67997 19.38 4.67997C19.14 4.67997 19.14 4.6533 18.9 4.6533C18.66 4.6533 18.66 4.63997 18.42 4.63997C18.18 4.63997 18.18 4.69997 17.94 4.69997C17.7 4.69997 17.7 4.6533 17.46 4.6533C17.22 4.6533 17.22 4.66663 16.98 4.66663C16.74 4.66663 16.74 4.66663 16.5 4.66663C16.26 4.66663 16.26 4.66663 16.02 4.66663C15.78 4.66663 15.78 4.66663 15.54 4.66663C15.3 4.66663 15.3 4.67997 15.06 4.67997C14.82 4.67997 14.82 4.66663 14.58 4.66663C14.34 4.66663 14.34 4.66663 14.1 4.66663C13.86 4.66663 13.86 4.68663 13.62 4.68663C13.38 4.68663 13.38 4.6933 13.14 4.6933C12.9 4.6933 12.9 4.68663 12.66 4.68663C12.42 4.68663 12.42 4.68663 12.18 4.68663C11.94 4.68663 11.94 4.6933 11.7 4.6933C11.46 4.6933 11.46 4.66663 11.22 4.66663C10.98 4.66663 10.98 4.69997 10.74 4.69997C10.5 4.69997 10.5 4.64663 10.26 4.64663C10.02 4.64663 10.02 4.64663 9.78 4.64663C9.54 4.64663 9.54 4.67997 9.3 4.67997C9.06 4.67997 9.06 4.67997 8.82 4.67997C8.58 4.67997 8.58 4.63997 8.34 4.63997C8.1 4.63997 8.1 4.67997 7.86 4.67997C7.62 4.67997 7.62 4.6933 7.38 4.6933C7.14 4.6933 7.14 4.66663 6.9 4.66663C6.66 4.66663 6.66 4.66663 6.42 4.66663C6.18 4.66663 6.18 4.64663 5.94 4.64663C5.7 4.64663 5.7 4.64663 5.45333 4.64663C5.20667 4.64663 5.21333 4.6533 4.96666 4.6533C4.72 4.6533 4.72666 4.6933 4.48 4.6933C4.23333 4.6933 4.24 4.66663 3.99333 4.66663C3.81333 4.66663 3.64666 4.70663 3.48666 4.7733C3.32666 4.83997 3.16666 4.92663 3.04666 5.04663C2.92666 5.16663 2.82666 5.31997 2.76 5.48663C2.69333 5.6533 2.67333 5.81997 2.67333 5.99997C2.67333 6.21997 2.67333 6.21997 2.67333 6.43997C2.67333 6.65997 2.66666 6.65997 2.66666 6.87997C2.66666 7.09997 2.64666 7.09997 2.64666 7.32663C2.64666 7.5533 2.64666 7.54663 2.64666 7.7733C2.64666 7.99997 2.63333 7.9933 2.63333 8.21997C2.63333 8.44663 2.66 8.43997 2.66 8.66663C2.66 8.84663 2.67333 9.0333 2.73333 9.18663C2.79333 9.33997 2.92666 9.48663 3.04666 9.60663C3.16666 9.72663 3.30666 9.8533 3.46666 9.91997C3.62666 9.98663 3.80666 10.0133 3.98666 10.0133C4.22666 10.0133 4.22666 10.0133 4.46 10.0133C4.69333 10.0133 4.7 10.0133 4.93333 10.0133C5.16666 10.0133 5.17333 9.96663 5.40666 9.96663C5.64 9.96663 5.64666 9.9933 5.88666 9.9933C6.12666 9.9933 6.12666 9.98663 6.36666 9.98663C6.60666 9.98663 6.60667 10.0066 6.84667 10.0066C7.08667 10.0066 7.08666 9.98663 7.32666 9.98663C7.56666 9.98663 7.56666 10.0066 7.80666 10.0066C8.04667 10.0066 8.04667 9.9733 8.28666 9.9733C8.52667 9.9733 8.52666 10.0133 8.76666 10.0133C9.00666 10.0133 9.00666 10.0133 9.24667 10.0133C9.48666 10.0133 9.48667 9.97997 9.72667 9.97997C9.96667 9.97997 9.96667 9.98663 10.2067 9.98663C10.4467 9.98663 10.4467 9.98663 10.6867 9.98663C10.9267 9.98663 10.9267 9.98663 11.1667 9.98663C11.4067 9.98663 11.4067 10.02 11.6467 10.02C11.8867 10.02 11.8867 9.9933 12.1267 9.9933C12.3667 9.9933 12.3667 9.96663 12.6067 9.96663C12.8467 9.96663 12.8467 10.02 13.0867 10.02C13.3267 10.02 13.3267 9.9933 13.5667 9.9933C13.8067 9.9933 13.8067 10.0266 14.0467 10.0266C14.2867 10.0266 14.2867 10.0266 14.5267 10.0266C14.7667 10.0266 14.7667 10.02 15.0067 10.02C15.2467 10.02 15.2467 9.9733 15.4867 9.9733C15.7267 9.9733 15.7267 10.0133 15.9667 10.0133C16.2067 10.0133 16.2067 10.0133 16.4467 10.0133C16.6867 10.0133 16.6867 10.0266 16.9267 10.0266C17.1667 10.0266 17.1667 10.0133 17.4067 10.0133C17.6467 10.0133 17.6467 9.98663 17.8867 9.98663C18.1267 9.98663 18.1267 9.98663 18.3667 9.98663C18.6067 9.98663 18.6067 9.96663 18.8467 9.96663C19.0867 9.96663 19.0867 9.96663 19.3267 9.96663C19.5667 9.96663 19.5667 10.02 19.8067 10.02C20.0467 10.02 20.0467 9.97997 20.2867 9.97997C20.5267 9.97997 20.5267 9.97997 20.7667 9.97997C21.0067 9.97997 21.0067 10.0333 21.2467 10.0333C21.4867 10.0333 21.4867 9.99997 21.7267 9.99997C21.9667 9.99997 21.9667 9.99997 22.2067 9.99997C22.4467 9.99997 22.4467 10.0333 22.6867 10.0333C22.9267 10.0333 22.9267 9.98663 23.1667 9.98663C23.4067 9.98663 23.4067 10.0266 23.6467 10.0266C23.8867 10.0266 23.8867 10.0133 24.1267 10.0133C24.3667 10.0133 24.3667 9.9733 24.6067 9.9733C24.8467 9.9733 24.8467 9.9733 25.0867 9.9733C25.3267 9.9733 25.3267 10.0066 25.5667 10.0066C25.8067 10.0066 25.8067 9.9733 26.0467 9.9733C26.2867 9.9733 26.2867 9.9933 26.5333 9.9933C26.78 9.9933 26.7733 10.02 27.02 10.02C27.2667 10.02 27.26 10.0066 27.5067 10.0066C27.7533 10.0066 27.7467 10.0333 27.9933 10.0333C28.1733 10.0333 28.3333 9.9333 28.4933 9.8733C28.6533 9.8133 28.84 9.75997 28.96 9.6333C29.08 9.50663 29.1333 9.3333 29.2 9.16663C29.2667 8.99997 29.32 8.84663 29.32 8.66663C29.32 8.44663 29.32 8.44663 29.32 8.22663C29.32 8.00663 29.3467 8.00663 29.3467 7.78663C29.3467 7.56663 29.32 7.56663 29.32 7.33997C29.32 7.1133 29.32 7.11997 29.32 6.8933C29.32 6.66663 29.3467 6.6733 29.3467 6.44663C29.3467 6.21997 29.3133 6.22663 29.3133 5.99997C29.3133 5.81997 29.28 5.6533 29.22 5.49997C29.16 5.34663 29.06 5.1933 28.94 5.06663C28.82 4.93997 28.6867 4.81997 28.5267 4.7533C28.3667 4.68663 28.1933 4.67997 28.0067 4.67997L28 4.6733Z" fill="${isActive ? primaryColor : "#E9E9E9"}"/>
  <path d="M28 13.3131C27.76 13.3131 27.76 13.3465 27.5267 13.3465C27.2933 13.3465 27.2867 13.3198 27.0533 13.3198C26.82 13.3198 26.8133 13.3198 26.58 13.3198C26.3467 13.3198 26.34 13.2998 26.1 13.2998C25.86 13.2998 25.86 13.2998 25.62 13.2998C25.38 13.2998 25.38 13.2998 25.14 13.2998C24.9 13.2998 24.9 13.3065 24.66 13.3065C24.42 13.3065 24.42 13.3065 24.18 13.3065C23.94 13.3065 23.94 13.3531 23.7 13.3531C23.46 13.3531 23.46 13.3531 23.22 13.3531C22.98 13.3531 22.98 13.3531 22.74 13.3531C22.5 13.3531 22.5 13.3065 22.26 13.3065C22.02 13.3065 22.02 13.3265 21.78 13.3265C21.54 13.3265 21.54 13.3331 21.3 13.3331C21.06 13.3331 21.06 13.3531 20.82 13.3531C20.58 13.3531 20.58 13.3065 20.34 13.3065C20.1 13.3065 20.1 13.3465 19.86 13.3465C19.62 13.3465 19.62 13.3331 19.38 13.3331C19.14 13.3331 19.14 13.3331 18.9 13.3331C18.66 13.3331 18.66 13.3598 18.42 13.3598C18.18 13.3598 18.18 13.3065 17.94 13.3065C17.7 13.3065 17.7 13.3465 17.46 13.3465C17.22 13.3465 17.22 13.3465 16.98 13.3465C16.74 13.3465 16.74 13.3531 16.5 13.3531C16.26 13.3531 16.26 13.2998 16.02 13.2998C15.78 13.2998 15.78 13.3398 15.54 13.3398C15.3 13.3398 15.3 13.3598 15.06 13.3598C14.82 13.3598 14.82 13.3198 14.58 13.3198C14.34 13.3198 14.34 13.3665 14.1 13.3665C13.86 13.3665 13.86 13.3665 13.62 13.3665C13.38 13.3665 13.38 13.3665 13.14 13.3665C12.9 13.3665 12.9 13.3131 12.66 13.3131C12.42 13.3131 12.42 13.3598 12.18 13.3598C11.94 13.3598 11.94 13.3598 11.7 13.3598C11.46 13.3598 11.46 13.3131 11.22 13.3131C10.98 13.3131 10.98 13.3265 10.74 13.3265C10.5 13.3265 10.5 13.3131 10.26 13.3131C10.02 13.3131 10.02 13.3265 9.78 13.3265C9.54 13.3265 9.54 13.3465 9.3 13.3465C9.06 13.3465 9.06 13.3598 8.82 13.3598C8.58 13.3598 8.58 13.3065 8.34 13.3065C8.1 13.3065 8.1 13.3065 7.86 13.3065C7.62 13.3065 7.62 13.3331 7.38 13.3331C7.14 13.3331 7.14 13.3665 6.9 13.3665C6.66 13.3665 6.66 13.3398 6.42 13.3398C6.18 13.3398 6.18 13.3131 5.94 13.3131C5.7 13.3131 5.7 13.3465 5.45333 13.3465C5.20667 13.3465 5.21333 13.3331 4.96666 13.3331C4.72 13.3331 4.72666 13.3598 4.48 13.3598C4.23333 13.3598 4.24 13.3065 3.99333 13.3065C3.81333 13.3065 3.64666 13.3731 3.48666 13.4398C3.32666 13.5065 3.17333 13.5998 3.05333 13.7265C2.93333 13.8531 2.82666 13.9931 2.76 14.1531C2.69333 14.3131 2.65333 14.4798 2.65333 14.6665C2.65333 14.8865 2.65333 14.8865 2.65333 15.1065C2.65333 15.3265 2.68666 15.3265 2.68666 15.5465C2.68666 15.7665 2.63333 15.7665 2.63333 15.9931C2.63333 16.2198 2.65333 16.2131 2.65333 16.4398C2.65333 16.6665 2.67333 16.6598 2.67333 16.8865C2.67333 17.1131 2.63333 17.1065 2.63333 17.3331C2.63333 17.5131 2.7 17.6865 2.76 17.8465C2.82 18.0065 2.92666 18.1531 3.05333 18.2731C3.18 18.3931 3.33333 18.4665 3.49333 18.5331C3.65333 18.5998 3.81333 18.6665 3.99333 18.6665C4.23333 18.6665 4.23333 18.6998 4.46666 18.6998C4.7 18.6998 4.70666 18.6598 4.94 18.6598C5.17333 18.6598 5.18 18.6531 5.41333 18.6531C5.64666 18.6531 5.65333 18.7065 5.89333 18.7065C6.13333 18.7065 6.13333 18.6798 6.37333 18.6798C6.61333 18.6798 6.61333 18.6665 6.85333 18.6665C7.09333 18.6665 7.09333 18.6665 7.33333 18.6665C7.57333 18.6665 7.57333 18.6998 7.81333 18.6998C8.05333 18.6998 8.05333 18.6465 8.29333 18.6465C8.53333 18.6465 8.53333 18.7131 8.77333 18.7131C9.01333 18.7131 9.01333 18.6865 9.25333 18.6865C9.49333 18.6865 9.49333 18.6998 9.73333 18.6998C9.97333 18.6998 9.97333 18.6465 10.2133 18.6465C10.4533 18.6465 10.4533 18.6465 10.6933 18.6465C10.9333 18.6465 10.9333 18.6598 11.1733 18.6598C11.4133 18.6598 11.4133 18.6931 11.6533 18.6931C11.8933 18.6931 11.8933 18.7065 12.1333 18.7065C12.3733 18.7065 12.3733 18.7065 12.6133 18.7065C12.8533 18.7065 12.8533 18.6998 13.0933 18.6998C13.3333 18.6998 13.3333 18.6731 13.5733 18.6731C13.8133 18.6731 13.8133 18.6598 14.0533 18.6598C14.2933 18.6598 14.2933 18.7131 14.5333 18.7131C14.7733 18.7131 14.7733 18.6665 15.0133 18.6665C15.2533 18.6665 15.2533 18.6731 15.4933 18.6731C15.7333 18.6731 15.7333 18.6598 15.9733 18.6598C16.2133 18.6598 16.2133 18.6731 16.4533 18.6731C16.6933 18.6731 16.6933 18.6465 16.9333 18.6465C17.1733 18.6465 17.1733 18.6731 17.4133 18.6731C17.6533 18.6731 17.6533 18.6998 17.8933 18.6998C18.1333 18.6998 18.1333 18.6998 18.3733 18.6998C18.6133 18.6998 18.6133 18.6998 18.8533 18.6998C19.0933 18.6998 19.0933 18.6931 19.3333 18.6931C19.5733 18.6931 19.5733 18.6665 19.8133 18.6665C20.0533 18.6665 20.0533 18.7131 20.2933 18.7131C20.5333 18.7131 20.5333 18.7131 20.7733 18.7131C21.0133 18.7131 21.0133 18.7065 21.2533 18.7065C21.4933 18.7065 21.4933 18.6865 21.7333 18.6865C21.9733 18.6865 21.9733 18.6598 22.2133 18.6598C22.4533 18.6598 22.4533 18.6665 22.6933 18.6665C22.9333 18.6665 22.9333 18.6931 23.1733 18.6931C23.4133 18.6931 23.4133 18.6931 23.6533 18.6931C23.8933 18.6931 23.8933 18.6665 24.1333 18.6665C24.3733 18.6665 24.3733 18.7131 24.6133 18.7131C24.8533 18.7131 24.8533 18.6531 25.0933 18.6531C25.3333 18.6531 25.3333 18.7131 25.5733 18.7131C25.8133 18.7131 25.8133 18.6998 26.0533 18.6998C26.2933 18.6998 26.2933 18.6798 26.54 18.6798C26.7867 18.6798 26.78 18.7065 27.0267 18.7065C27.2733 18.7065 27.2667 18.6798 27.5133 18.6798C27.76 18.6798 27.7533 18.6865 28 18.6865C28.18 18.6865 28.36 18.6465 28.5133 18.5798C28.6667 18.5131 28.8067 18.3931 28.9333 18.2731C29.06 18.1531 29.16 18.0131 29.2267 17.8465C29.2933 17.6798 29.3267 17.5198 29.3267 17.3398C29.3267 17.1198 29.36 17.1198 29.36 16.8998C29.36 16.6798 29.36 16.6798 29.36 16.4598C29.36 16.2398 29.36 16.2398 29.36 16.0131C29.36 15.7865 29.3467 15.7931 29.3467 15.5665C29.3467 15.3398 29.3133 15.3465 29.3133 15.1198C29.3133 14.8931 29.3333 14.8998 29.3333 14.6731C29.3333 14.4931 29.3133 14.3131 29.2533 14.1531C29.1933 13.9931 29.0933 13.8265 28.9667 13.7065C28.84 13.5865 28.68 13.4998 28.5133 13.4331C28.3467 13.3665 28.18 13.3198 28 13.3198V13.3131Z" fill="${isActive ? primaryColor : "#E9E9E9"}"/>
  <path d="M28 21.9801C27.76 21.9801 27.76 22.0268 27.5267 22.0268C27.2933 22.0268 27.2867 22.0268 27.0533 22.0268C26.82 22.0268 26.8133 22.0068 26.58 22.0068C26.3467 22.0068 26.34 22.0001 26.1 22.0001C25.86 22.0001 25.86 22.0068 25.62 22.0068C25.38 22.0068 25.38 21.9801 25.14 21.9801C24.9 21.9801 24.9 21.9801 24.66 21.9801C24.42 21.9801 24.42 21.9801 24.18 21.9801C23.94 21.9801 23.94 22.0135 23.7 22.0135C23.46 22.0135 23.46 22.0135 23.22 22.0135C22.98 22.0135 22.98 21.9735 22.74 21.9735C22.5 21.9735 22.5 22.0201 22.26 22.0201C22.02 22.0201 22.02 22.0001 21.78 22.0001C21.54 22.0001 21.54 21.9801 21.3 21.9801C21.06 21.9801 21.06 22.0068 20.82 22.0068C20.58 22.0068 20.58 21.9735 20.34 21.9735C20.1 21.9735 20.1 22.0335 19.86 22.0335C19.62 22.0335 19.62 21.9868 19.38 21.9868C19.14 21.9868 19.14 22.0135 18.9 22.0135C18.66 22.0135 18.66 22.0135 18.42 22.0135C18.18 22.0135 18.18 21.9801 17.94 21.9801C17.7 21.9801 17.7 22.0201 17.46 22.0201C17.22 22.0201 17.22 22.0201 16.98 22.0201C16.74 22.0201 16.74 22.0068 16.5 22.0068C16.26 22.0068 16.26 21.9801 16.02 21.9801C15.78 21.9801 15.78 21.9801 15.54 21.9801C15.3 21.9801 15.3 21.9801 15.06 21.9801C14.82 21.9801 14.82 21.9801 14.58 21.9801C14.34 21.9801 14.34 22.0268 14.1 22.0268C13.86 22.0268 13.86 22.0135 13.62 22.0135C13.38 22.0135 13.38 21.9801 13.14 21.9801C12.9 21.9801 12.9 22.0201 12.66 22.0201C12.42 22.0201 12.42 21.9935 12.18 21.9935C11.94 21.9935 11.94 21.9668 11.7 21.9668C11.46 21.9668 11.46 22.0068 11.22 22.0068C10.98 22.0068 10.98 21.9801 10.74 21.9801C10.5 21.9801 10.5 21.9668 10.26 21.9668C10.02 21.9668 10.02 22.0268 9.78 22.0268C9.54 22.0268 9.54 22.0268 9.3 22.0268C9.06 22.0268 9.06 22.0068 8.82 22.0068C8.58 22.0068 8.58 21.9801 8.34 21.9801C8.1 21.9801 8.1 21.9801 7.86 21.9801C7.62 21.9801 7.62 21.9868 7.38 21.9868C7.14 21.9868 7.14 22.0135 6.9 22.0135C6.66 22.0135 6.66 22.0068 6.42 22.0068C6.18 22.0068 6.18 22.0268 5.94 22.0268C5.7 22.0268 5.7 22.0135 5.45333 22.0135C5.20667 22.0135 5.21333 22.0068 4.96667 22.0068C4.72 22.0068 4.72667 22.0201 4.48 22.0201C4.23333 22.0201 4.24 22.0201 3.99333 22.0201C3.81333 22.0201 3.65333 22.0735 3.49333 22.1401C3.33333 22.2068 3.16 22.2668 3.04 22.3935C2.92 22.5201 2.82667 22.6735 2.76 22.8335C2.69333 22.9935 2.64 23.1601 2.64 23.3468C2.64 23.5668 2.68667 23.5668 2.68667 23.7868C2.68667 24.0068 2.68 24.0068 2.68 24.2268C2.68 24.4468 2.69333 24.4468 2.69333 24.6735C2.69333 24.9001 2.66 24.8935 2.66 25.1201C2.66 25.3468 2.64667 25.3401 2.64667 25.5668C2.64667 25.7935 2.64667 25.7868 2.64667 26.0135C2.64667 26.1935 2.67333 26.3801 2.74 26.5335C2.80667 26.6868 2.92667 26.8401 3.05333 26.9601C3.18 27.0801 3.32667 27.1868 3.48667 27.2535C3.64667 27.3201 3.82 27.3735 4 27.3735C4.24 27.3735 4.24 27.3401 4.47333 27.3401C4.70667 27.3401 4.71333 27.3535 4.94667 27.3535C5.18 27.3535 5.18667 27.3468 5.42 27.3468C5.65333 27.3468 5.66 27.3201 5.9 27.3201C6.14 27.3201 6.14 27.3201 6.38 27.3201C6.62 27.3201 6.62 27.3668 6.86 27.3668C7.1 27.3668 7.1 27.3268 7.34 27.3268C7.58 27.3268 7.58 27.3401 7.82 27.3401C8.06 27.3401 8.06 27.3535 8.3 27.3535C8.54 27.3535 8.54 27.3401 8.78 27.3401C9.02 27.3401 9.02 27.3601 9.26 27.3601C9.5 27.3601 9.5 27.3401 9.74 27.3401C9.98 27.3401 9.98 27.3535 10.22 27.3535C10.46 27.3535 10.46 27.3535 10.7 27.3535C10.94 27.3535 10.94 27.3601 11.18 27.3601C11.42 27.3601 11.42 27.3401 11.66 27.3401C11.9 27.3401 11.9 27.3201 12.14 27.3201C12.38 27.3201 12.38 27.3535 12.62 27.3535C12.86 27.3535 12.86 27.3135 13.1 27.3135C13.34 27.3135 13.34 27.3335 13.58 27.3335C13.82 27.3335 13.82 27.3601 14.06 27.3601C14.3 27.3601 14.3 27.3468 14.54 27.3468C14.78 27.3468 14.78 27.3601 15.02 27.3601C15.26 27.3601 15.26 27.3468 15.5 27.3468C15.74 27.3468 15.74 27.3268 15.98 27.3268C16.22 27.3268 16.22 27.3468 16.46 27.3468C16.7 27.3468 16.7 27.3068 16.94 27.3068C17.18 27.3068 17.18 27.3468 17.42 27.3468C17.66 27.3468 17.66 27.3335 17.9 27.3335C18.14 27.3335 18.14 27.3335 18.38 27.3335C18.62 27.3335 18.62 27.3468 18.86 27.3468C19.1 27.3468 19.1 27.3601 19.34 27.3601C19.58 27.3601 19.58 27.3468 19.82 27.3468C20.06 27.3468 20.06 27.3601 20.3 27.3601C20.54 27.3601 20.54 27.3601 20.78 27.3601C21.02 27.3601 21.02 27.3335 21.26 27.3335C21.5 27.3335 21.5 27.3468 21.74 27.3468C21.98 27.3468 21.98 27.3068 22.22 27.3068C22.46 27.3068 22.46 27.3068 22.7 27.3068C22.94 27.3068 22.94 27.3268 23.18 27.3268C23.42 27.3268 23.42 27.3268 23.66 27.3268C23.9 27.3268 23.9 27.3268 24.14 27.3268C24.38 27.3268 24.38 27.3601 24.62 27.3601C24.86 27.3601 24.86 27.3401 25.1 27.3401C25.34 27.3401 25.34 27.3268 25.58 27.3268C25.82 27.3268 25.82 27.3335 26.06 27.3335C26.3 27.3335 26.3 27.3468 26.5467 27.3468C26.7933 27.3468 26.7867 27.3201 27.0333 27.3201C27.28 27.3201 27.2733 27.3401 27.52 27.3401C27.7667 27.3401 27.76 27.3401 28.0067 27.3401C28.1867 27.3401 28.36 27.2868 28.5133 27.2201C28.6667 27.1535 28.82 27.0535 28.94 26.9335C29.06 26.8135 29.18 26.6735 29.2467 26.5135C29.3133 26.3535 29.36 26.1801 29.36 26.0001C29.36 25.7801 29.3267 25.7801 29.3267 25.5601C29.3267 25.3401 29.3533 25.3401 29.3533 25.1201C29.3533 24.9001 29.3533 24.9001 29.3533 24.6735C29.3533 24.4468 29.3733 24.4535 29.3733 24.2268C29.3733 24.0001 29.3733 24.0068 29.3733 23.7801C29.3733 23.5535 29.3733 23.5601 29.3733 23.3335C29.3733 23.1535 29.3267 22.9735 29.2667 22.8135C29.2067 22.6535 29.0933 22.4935 28.9733 22.3735C28.8533 22.2535 28.68 22.1868 28.5133 22.1201C28.3467 22.0535 28.1933 21.9801 28.0067 21.9801H28Z" fill="${isActive ? primaryColor : "#E9E9E9"}"/>
</svg>
''';
    return SvgPicture.string(svgString, height: 32);
  }

  @override
  Widget build(BuildContext context, ref) {
    final query = getListAppNotificationQuery();
    return Scaffold(
      body: child,
      bottomNavigationBar: QueryBuilder(
          query: query,
          builder: (context, state) {
            final hasUnread = state.data
                    ?.where((notification) => notification.is_read != true)
                    .isNotEmpty ??
                false;
            final stringPrimaryColor =
                "#${ref.watch(characterThemeProvider).colors!.primary!.toRadixString(16).toString().substring(
                      2,
                    )}";
            final stringSecondaryColor =
                "#${ref.watch(characterThemeProvider).colors!.secondary!.toRadixString(16).toString().substring(
                      2,
                    )}";
            return BottomNavigationBar(
              currentIndex: routePath != null ? tabList.indexOf(routePath!) : 0,
              showSelectedLabels: false,
              showUnselectedLabels: false,
              onTap: (index) {
                context.go(tabList[index]);
              },
              items: [
                BottomNavigationBarItem(
                  icon: Padding(
                    padding: const EdgeInsets.only(top: 5),
                    child: mailIcon(
                        false, stringPrimaryColor, stringSecondaryColor),
                  ),
                  activeIcon: NavbarIconWidget(
                    svg: mailIcon(
                        true, stringPrimaryColor, stringSecondaryColor),
                    RotateDirection: 'left',
                  ),
                  label: '받은 편지함',
                ),
                BottomNavigationBarItem(
                  icon: NotificationIconWidget(
                    hasUnread: hasUnread,
                    svg: bellIcon(
                        false, stringPrimaryColor, stringSecondaryColor),
                  ),
                  activeIcon: NavbarIconWidget(
                      svg: bellIcon(
                          true, stringPrimaryColor, stringSecondaryColor),
                      RotateDirection: 'left'),
                  label: '알림',
                ),
                BottomNavigationBarItem(
                  icon: Padding(
                    padding: const EdgeInsets.only(top: 5.0),
                    child: menuIcon(false, stringPrimaryColor),
                  ),
                  activeIcon: NavbarIconWidget(
                      svg: menuIcon(true, stringPrimaryColor),
                      RotateDirection: 'right'),
                  label: '전체',
                ),
              ],
            );
          }),
    );
  }
}
